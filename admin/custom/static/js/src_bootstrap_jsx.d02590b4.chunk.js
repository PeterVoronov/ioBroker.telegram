"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{35700:function(l,P,n){n.r(P);var I=n(4819),s=n.n(I),b=n(24470),p=n(25309),f=n(628),D=n(33919),j=n(97230),M=n(33924),y=n(55289),z=n(40666),A=n(15854),m=n.n(A),J=n(58503),i=n(11705),L=n(59665),c=n(75606),U=Object.defineProperty,Z=(a,e,t)=>e in a?U(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,w=(a,e,t)=>(Z(a,typeof e!="symbol"?e+"":e,t),t),_=(a,e,t)=>new Promise((r,o)=>{var u=d=>{try{g(t.next(d))}catch(v){o(v)}},h=d=>{try{g(t.throw(d))}catch(v){o(v)}},g=d=>d.done?r(d.value):Promise.resolve(d.value).then(u,h);g((t=t.apply(a,e)).next())});const B=()=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"}});class E extends c.ConfigGeneric{constructor(e){super(e),w(this,"onAliveChanged",(t,r)=>{const o=r?r.val:!1;o!==this.state.alive&&this.setState({alive:o},()=>{o&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(e=>_(this,null,function*(){e&&e.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo("telegram."+this.props.instance,"adminuser",null).then(e=>{const t=[];for(const r in e){const o=[];e[r].userName&&o.push(e[r].userName),e[r].firstName&&o.push(e[r].firstName),t.push({id:r,names:o.join(" / "),sysMessages:e[r].sysMessages})}this.setState({users:t,initialized:!0})})}componentWillUnmount(){return _(this,null,function*(){yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(e){const t=this.state.users.findIndex(r=>r.id===e);if(t!==-1){const r=!this.state.users[t].sysMessages;this.props.socket.sendTo("telegram."+this.props.instance,"systemMessages",{itemId:e,checked:r}).then(o=>{if(o===e){const u=JSON.parse(JSON.stringify(this.state.users)),h=u.findIndex(g=>g.id===e);h!==-1&&(u[h].sysMessages=r,this.setState({users:u}))}})}}onDelete(e){this.props.socket.sendTo("telegram."+this.props.instance,"delUser",e).then(t=>{if(t===e){const r=JSON.parse(JSON.stringify(this.state.users)),o=r.findIndex(u=>u.id===e);o!==-1&&(r.splice(o,1),this.setState({users:r}))}})}renderConfirmDialog(){return this.state.confirm?s().createElement(c.Confirm,{onClose:e=>{const t=this.state.confirm;this.setState({confirm:null},()=>e&&this.onDelete(t))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?s().createElement("div",null,c.i18n.t("custom_telegram_not_alive")):this.state.initialized?s().createElement("div",{style:{width:"100%"}},s().createElement("h4",null,c.i18n.t("custom_telegram_title")),s().createElement(i.TableContainer,{component:i.Paper,style:{width:"100%"}},s().createElement(i.Table,{style:{width:"100%"},size:"small"},s().createElement(i.TableHead,null,s().createElement(i.TableRow,null,s().createElement(i.TableCell,null,c.i18n.t("custom_telegram_id")),s().createElement(i.TableCell,null,c.i18n.t("custom_telegram_name")),s().createElement(i.TableCell,null,c.i18n.t("custom_telegram_sys_messages")),s().createElement(i.TableCell,null))),s().createElement(i.TableBody,null,this.state.users.map(e=>s().createElement(i.TableRow,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},s().createElement(i.TableCell,{component:"th",scope:"row"},e.id),s().createElement(i.TableCell,null,e.names),s().createElement(i.TableCell,null,s().createElement(i.Checkbox,{disabled:!this.state.alive,checked:!!e.sysMessages,onClick:()=>this.onSysMessageChange(e.id)})),s().createElement(i.TableCell,null,s().createElement(i.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:e.id})},s().createElement(L.Delete,null)))))))),this.renderConfirmDialog()):s().createElement(i.LinearProgress,null)}}E.propTypes={socket:m().object.isRequired,themeType:m().string,themeName:m().string,style:m().object,className:m().string,data:m().object.isRequired,attr:m().string,schema:m().object,onError:m().func,onChange:m().func};var F=(0,J.withStyles)(B)(E),R=Object.defineProperty,S=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,T=(a,e,t)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,$=(a,e)=>{for(var t in e||(e={}))G.call(e,t)&&T(a,t,e[t]);if(S)for(var t of S(e))W.call(e,t)&&T(a,t,e[t]);return a};const V=a=>({app:{backgroundColor:a.palette.background.default,color:a.palette.text.primary,height:"100%"},item:{padding:50,width:400}});class H extends M.Z{constructor(e){const t=$({},e);super(e,t),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const r={en:n(86443),de:n(19837),ru:n(50482),pt:n(65909),nl:n(43573),fr:n(86115),it:n(79399),es:n(55117),pl:n(28130),"zh-cn":n(58246)};y.default.setTranslations(r),y.default.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement("div",{className:this.props.classes.app},s().createElement("div",{className:this.props.classes.item},s().createElement(F,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})}}))))):s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement(z.default,{theme:this.state.themeType})))}}var K=(0,j.Z)(V)(H),Q=n(82890),X=Object.defineProperty,N=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,C=(a,e,t)=>e in a?X(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q=(a,e)=>{for(var t in e||(e={}))Y.call(e,t)&&C(a,t,e[t]);if(N)for(var t of N(e))k.call(e,t)&&C(a,t,e[t]);return a},ee=a=>{const e="#dd5325",t="#73b6a8",r=q({},(0,Q.default)(a));return r&&(r.palette.text.danger={color:e},r.palette.text.success={color:t},r)};window.adapterName="adapter-component-template";let O=D.default.getThemeName();function x(){const a=document.getElementById("root");return(0,b.s)(a).render(s().createElement(s().StrictMode,null,s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:ee(O)},s().createElement(K,{socket:{port:8081},onThemeChange:t=>{O=t,x()}})))))}x()},19837:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},86443:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},55117:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},86115:function(l){l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},79399:function(l){l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},43573:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},28130:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},65909:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},50482:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},58246:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.d02590b4.chunk.js.map
"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{19634:(o,c,e)=>{var a=e(28437),t=e.n(a),m=e(94140),d=e(6761),r=e(40805),n=e(67085),l=e(37449),_=e(95973),u=e.n(_),v=e(21839),A=e(60556),E=Object.defineProperty,h=(g,s,i)=>s in g?E(g,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[s]=i,p=(g,s,i)=>h(g,typeof s!="symbol"?s+"":s,i),P=(g,s,i)=>new Promise((f,D)=>{var R=S=>{try{U(i.next(S))}catch(N){D(N)}},j=S=>{try{U(i.throw(S))}catch(N){D(N)}},U=S=>S.done?f(S.value):Promise.resolve(S.value).then(R,j);U((i=i.apply(g,s)).next())});class C extends A.ConfigGeneric{constructor(s){super(s),p(this,"onAliveChanged",(i,f)=>{const D=f?f.val:!1;D!==this.state.alive&&this.setState({alive:D},()=>{D&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(s=>P(this,null,function*(){s&&s.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo(`telegram.${this.props.instance}`,"adminuser",null).then(s=>{const i=[];for(const f in s){const D=[];s[f].userName&&D.push(s[f].userName),s[f].firstName&&D.push(s[f].firstName),i.push({id:f,names:D.join(" / "),sysMessages:s[f].sysMessages})}this.setState({users:i,initialized:!0})})}componentWillUnmount(){return P(this,null,function*(){yield this.props.socket.unsubscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(s){const i=this.state.users.findIndex(f=>f.id===s);if(i!==-1){const f=!this.state.users[i].sysMessages;this.props.socket.sendTo(`telegram.${this.props.instance}`,"systemMessages",{itemId:s,checked:f}).then(D=>{if(D===s){const R=JSON.parse(JSON.stringify(this.state.users)),j=R.findIndex(U=>U.id===s);j!==-1&&(R[j].sysMessages=f,this.setState({users:R}))}})}}onDelete(s){this.props.socket.sendTo(`telegram.${this.props.instance}`,"delUser",s).then(i=>{if(i===s){const f=JSON.parse(JSON.stringify(this.state.users)),D=f.findIndex(R=>R.id===s);D!==-1&&(f.splice(D,1),this.setState({users:f}))}})}renderConfirmDialog(){return this.state.confirm?t().createElement(l.Confirm,{onClose:s=>{const i=this.state.confirm;this.setState({confirm:null},()=>s&&this.onDelete(i))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?t().createElement("div",null,l.I18n.t("custom_telegram_not_alive")):this.state.initialized?t().createElement("div",{style:{width:"100%"}},t().createElement("h4",null,l.I18n.t("custom_telegram_title")),t().createElement(n.TableContainer,{component:n.Paper,style:{width:"100%"}},t().createElement(n.Table,{style:{width:"100%"},size:"small"},t().createElement(n.TableHead,null,t().createElement(n.TableRow,null,t().createElement(n.TableCell,null,l.I18n.t("custom_telegram_id")),t().createElement(n.TableCell,null,l.I18n.t("custom_telegram_name")),t().createElement(n.TableCell,null,l.I18n.t("custom_telegram_sys_messages")),t().createElement(n.TableCell,null))),t().createElement(n.TableBody,null,this.state.users.map(s=>t().createElement(n.TableRow,{key:s.id,sx:{"&:last-child td, &:last-child th":{border:0}}},t().createElement(n.TableCell,{component:"th",scope:"row"},s.id),t().createElement(n.TableCell,null,s.names),t().createElement(n.TableCell,null,t().createElement(n.Checkbox,{disabled:!this.state.alive,checked:!!s.sysMessages,onClick:()=>this.onSysMessageChange(s.id)})),t().createElement(n.TableCell,null,t().createElement(n.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:s.id})},t().createElement(v.Delete,null)))))))),this.renderConfirmDialog()):t().createElement(n.LinearProgress,null)}}C.propTypes={socket:u().object.isRequired,themeType:u().string,themeName:u().string,style:u().object,data:u().object.isRequired,attr:u().string,schema:u().object,onError:u().func,onChange:u().func};const B=C;var K=Object.defineProperty,W=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,y=(g,s,i)=>s in g?K(g,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[s]=i,M=(g,s)=>{for(var i in s||(s={}))T.call(s,i)&&y(g,i,s[i]);if(W)for(var i of W(s))O.call(s,i)&&y(g,i,s[i]);return g};const L={app:g=>({backgroundColor:g.palette.background.default,color:g.palette.text.primary,height:"100%"}),item:{padding:50,width:400}};class x extends l.GenericApp{constructor(s){const i=M({},s);super(s,i),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const f={en:e(75553),de:e(46477),ru:e(63715),pt:e(74606),nl:e(86164),fr:e(74554),it:e(66851),es:e(72706),pl:e(23638),uk:e(93882),"zh-cn":e(80222)};l.I18n.setTranslations(f),l.I18n.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?t().createElement(d.A,{injectFirst:!0},t().createElement(r.A,{theme:this.state.theme},t().createElement(n.Box,{sx:L.app},t().createElement("div",{style:L.item},t().createElement(B,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:s=>this.setState({data:s})}))))):t().createElement(d.A,{injectFirst:!0},t().createElement(r.A,{theme:this.state.theme},t().createElement(l.Loader,{theme:this.state.themeType})))}}const I=x;window.adapterName="adapter-component-template";const b=document.getElementById("root");(0,m.H)(b).render(t().createElement(t().StrictMode,null,t().createElement(I,{socket:{port:8081}})))},93225:(o,c,e)=>{e.d(c,{A:()=>d});var a=e(28437),t=e.n(a);const d=a.createContext(null)},15217:(o,c,e)=>{e.d(c,{A:()=>d});var a=e(28437),t=e.n(a),m=e(93225);function d(){return a.useContext(m.A)}},6761:(o,c,e)=>{e.d(c,{A:()=>u});var a=e(28437),t=e.n(a),m=e(95973),d=e.n(m),r=e(70230),n=e(11862),l=e(64922);let _;typeof document=="object"&&(_=(0,n.A)({key:"css",prepend:!0}));function u(v){const{injectFirst:A,children:E}=v;return A&&_?(0,l.jsx)(r.C,{value:_,children:E}):E}},78684:(o,c,e)=>{e.d(c,{A:()=>A,b:()=>v});var a=e(28437),t=e.n(a),m=e(95973),d=e.n(m),r=e(24517),n=e(64922);const l=a.createContext(void 0);function _({value:E,children:h}){return(0,n.jsx)(l.Provider,{value:E,children:h})}function u(E){const{theme:h,name:p,props:P}=E;if(!h||!h.components||!h.components[p])return P;const C=h.components[p];return C.defaultProps?(0,r.A)(C.defaultProps,P):!C.styleOverrides&&!C.variants?(0,r.A)(C,P):P}function v({props:E,name:h}){const p=a.useContext(l);return u({props:E,name:h,theme:{components:p}})}const A=_},36577:(o,c,e)=>{e.d(c,{A:()=>E,I:()=>A});var a=e(58168),t=e(98587),m=e(28437),d=e.n(m),r=e(95973),n=e.n(r),l=e(64922);const _=["value"],u=m.createContext();function v(h){let{value:p}=h,P=(0,t.A)(h,_);return(0,l.jsx)(u.Provider,(0,a.A)({value:p!=null?p:!0},P))}const A=()=>{const h=m.useContext(u);return h!=null?h:!1},E=v},34399:(o,c,e)=>{e.d(c,{A:()=>W});var a=e(58168),t=e(28437),m=e(95973),d=e(15217),r=e(93225);const l=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var _=e(64922);function u(T,O){return typeof O=="function"?O(T):(0,a.A)({},T,O)}function v(T){const{children:O,theme:y}=T,M=(0,d.A)(),L=t.useMemo(()=>{const x=M===null?y:u(M,y);return x!=null&&(x[l]=M!==null),x},[y,M]);return(0,_.jsx)(r.A.Provider,{value:L,children:O})}const A=v;var E=e(70230),h=e(25120),p=e(36577),P=e(78684);const C={};function B(T,O,y,M=!1){return t.useMemo(()=>{const L=T&&O[T]||O;if(typeof y=="function"){const x=y(L),I=T?(0,a.A)({},O,{[T]:x}):x;return M?()=>I:I}return T?(0,a.A)({},O,{[T]:y}):(0,a.A)({},O,y)},[T,O,y,M])}function K(T){const{children:O,theme:y,themeId:M}=T,L=(0,h.A)(C),x=(0,d.A)()||C,I=B(M,L,y),b=B(M,x,y,!0),J=I.direction==="rtl";return(0,_.jsx)(A,{theme:b,children:(0,_.jsx)(E.T.Provider,{value:I,children:(0,_.jsx)(p.A,{value:J,children:(0,_.jsx)(P.A,{value:I==null?void 0:I.components,children:O})})})})}const W=K},25120:(o,c,e)=>{e.d(c,{A:()=>n});var a=e(28437),t=e.n(a),m=e(70230);function d(l){return Object.keys(l).length===0}function r(l=null){const _=a.useContext(m.T);return!_||d(_)?l:_}const n=r},40805:(o,c,e)=>{e.d(c,{A:()=>A});var a=e(58168),t=e(98587),m=e(28437),d=e.n(m),r=e(95973),n=e.n(r),l=e(34399),_=e(92066),u=e(64922);const v=["theme"];function A(E){let{theme:h}=E,p=(0,t.A)(E,v);const P=h[_.A];return(0,u.jsx)(l.A,(0,a.A)({},p,{themeId:P?_.A:void 0,theme:P||h}))}},92066:(o,c,e)=>{e.d(c,{A:()=>a});const a="$$material"},24517:(o,c,e)=>{e.d(c,{A:()=>t});var a=e(58168);function t(m,d){const r=(0,a.A)({},d);return Object.keys(m).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=(0,a.A)({},m[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const l=m[n]||{},_=d[n];r[n]={},!_||!Object.keys(_)?r[n]=l:!l||!Object.keys(l)?r[n]=_:(r[n]=(0,a.A)({},_),Object.keys(l).forEach(u=>{r[n][u]=t(l[u],_[u])}))}else r[n]===void 0&&(r[n]=m[n])}),r}},94140:(o,c,e)=>{var a,t=e(23479);if(1)c.H=t.createRoot,a=t.hydrateRoot;else var m},13394:(o,c,e)=>{var a;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=e(28437),m=Symbol.for("react.element"),d=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function _(u,v,A){var E,h={},p=null,P=null;A!==void 0&&(p=""+A),v.key!==void 0&&(p=""+v.key),v.ref!==void 0&&(P=v.ref);for(E in v)r.call(v,E)&&!l.hasOwnProperty(E)&&(h[E]=v[E]);if(u&&u.defaultProps)for(E in v=u.defaultProps,v)h[E]===void 0&&(h[E]=v[E]);return{$$typeof:m,type:u,key:p,ref:P,props:h,_owner:n.current}}a=d,c.jsx=_,c.jsxs=_},64922:(o,c,e)=>{o.exports=e(13394)},58168:(o,c,e)=>{e.d(c,{A:()=>a});function a(){return a=Object.assign?Object.assign.bind():function(t){for(var m=1;m<arguments.length;m++){var d=arguments[m];for(var r in d)({}).hasOwnProperty.call(d,r)&&(t[r]=d[r])}return t},a.apply(null,arguments)}},98587:(o,c,e)=>{e.d(c,{A:()=>a});function a(t,m){if(t==null)return{};var d={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(m.includes(r))continue;d[r]=t[r]}return d}},46477:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},75553:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},72706:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},74554:o=>{o.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},66851:o=>{o.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},86164:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},23638:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},74606:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},63715:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},93882:o=>{o.exports=JSON.parse(`{"custom_telegram_not_alive":"\u0415\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454","custom_telegram_id":"ID","custom_telegram_name":"\u0406\u043C'\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u0456 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}`)},80222:o=>{o.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.04ccfc57.chunk.js.map
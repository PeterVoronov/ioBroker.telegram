"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{49717:function(a,u,e){e.r(u);var l=e(4819),s=e.n(l),g=e(24470),T=e(25309),f=e(93109),r=e(94427),m=e(75606),p=e(15854),d=e.n(p),M=e(59665),x=e(68844),E=Object.defineProperty,O=(i,t,n)=>t in i?E(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,I=(i,t,n)=>(O(i,typeof t!="symbol"?t+"":t,n),n),S=(i,t,n)=>new Promise((o,v)=>{var A=L=>{try{R(n.next(L))}catch(K){v(K)}},B=L=>{try{R(n.throw(L))}catch(K){v(K)}},R=L=>L.done?o(L.value):Promise.resolve(L.value).then(A,B);R((n=n.apply(i,t)).next())});class N extends x.ConfigGeneric{constructor(t){super(t),I(this,"onAliveChanged",(n,o)=>{const v=o?o.val:!1;v!==this.state.alive&&this.setState({alive:v},()=>{v&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(t=>S(this,null,function*(){t&&t.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo(`telegram.${this.props.instance}`,"adminuser",null).then(t=>{const n=[];for(const o in t){const v=[];t[o].userName&&v.push(t[o].userName),t[o].firstName&&v.push(t[o].firstName),n.push({id:o,names:v.join(" / "),sysMessages:t[o].sysMessages})}this.setState({users:n,initialized:!0})})}componentWillUnmount(){return S(this,null,function*(){yield this.props.socket.unsubscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(t){const n=this.state.users.findIndex(o=>o.id===t);if(n!==-1){const o=!this.state.users[n].sysMessages;this.props.socket.sendTo(`telegram.${this.props.instance}`,"systemMessages",{itemId:t,checked:o}).then(v=>{if(v===t){const A=JSON.parse(JSON.stringify(this.state.users)),B=A.findIndex(R=>R.id===t);B!==-1&&(A[B].sysMessages=o,this.setState({users:A}))}})}}onDelete(t){this.props.socket.sendTo(`telegram.${this.props.instance}`,"delUser",t).then(n=>{if(n===t){const o=JSON.parse(JSON.stringify(this.state.users)),v=o.findIndex(A=>A.id===t);v!==-1&&(o.splice(v,1),this.setState({users:o}))}})}renderConfirmDialog(){return this.state.confirm?s().createElement(m.Confirm,{onClose:t=>{const n=this.state.confirm;this.setState({confirm:null},()=>t&&this.onDelete(n))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?s().createElement("div",null,m.I18n.t("custom_telegram_not_alive")):this.state.initialized?s().createElement("div",{style:{width:"100%"}},s().createElement("h4",null,m.I18n.t("custom_telegram_title")),s().createElement(r.TableContainer,{component:r.Paper,style:{width:"100%"}},s().createElement(r.Table,{style:{width:"100%"},size:"small"},s().createElement(r.TableHead,null,s().createElement(r.TableRow,null,s().createElement(r.TableCell,null,m.I18n.t("custom_telegram_id")),s().createElement(r.TableCell,null,m.I18n.t("custom_telegram_name")),s().createElement(r.TableCell,null,m.I18n.t("custom_telegram_sys_messages")),s().createElement(r.TableCell,null))),s().createElement(r.TableBody,null,this.state.users.map(t=>s().createElement(r.TableRow,{key:t.id,sx:{"&:last-child td, &:last-child th":{border:0}}},s().createElement(r.TableCell,{component:"th",scope:"row"},t.id),s().createElement(r.TableCell,null,t.names),s().createElement(r.TableCell,null,s().createElement(r.Checkbox,{disabled:!this.state.alive,checked:!!t.sysMessages,onClick:()=>this.onSysMessageChange(t.id)})),s().createElement(r.TableCell,null,s().createElement(r.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:t.id})},s().createElement(M.Delete,null)))))))),this.renderConfirmDialog()):s().createElement(r.LinearProgress,null)}}N.propTypes={socket:d().object.isRequired,themeType:d().string,themeName:d().string,style:d().object,data:d().object.isRequired,attr:d().string,schema:d().object,onError:d().func,onChange:d().func};var U=N,W=Object.defineProperty,j=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,h=(i,t,n)=>t in i?W(i,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[t]=n,y=(i,t)=>{for(var n in t||(t={}))_.call(t,n)&&h(i,n,t[n]);if(j)for(var n of j(t))c.call(t,n)&&h(i,n,t[n]);return i};const C={app:i=>({backgroundColor:i.palette.background.default,color:i.palette.text.primary,height:"100%"}),item:{padding:50,width:400}};class P extends m.GenericApp{constructor(t){const n=y({},t);super(t,n),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const o={en:e(86443),de:e(19837),ru:e(50482),pt:e(65909),nl:e(43573),fr:e(86115),it:e(79399),es:e(55117),pl:e(28130),uk:e(17138),"zh-cn":e(58246)};m.I18n.setTranslations(o),m.I18n.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?s().createElement(T.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement(r.Box,{sx:C.app},s().createElement("div",{style:C.item},s().createElement(U,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:t=>this.setState({data:t})}))))):s().createElement(T.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement(m.Loader,{theme:this.state.themeType})))}}var D=P;window.adapterName="adapter-component-template";const Z=document.getElementById("root");(0,g.s)(Z).render(s().createElement(s().StrictMode,null,s().createElement(D,{socket:{port:8081}})))},93109:function(a,u,e){e.d(u,{Z:function(){return x}});var l=e(87462),s=e(63366),g=e(4819),T=e.n(g),f=e(15854),r=e.n(f),m=e(86210),p=e(37207),d=e(67557);const M=["theme"];function x(E){let{theme:O}=E,I=(0,s.Z)(E,M);const S=O[p.Z];return(0,d.jsx)(m.Z,(0,l.Z)({},I,{themeId:S?p.Z:void 0,theme:S||O}))}},5457:function(a,u,e){var l=e(4819),s=e.n(l);const g=l.createContext(null);u.Z=g},66005:function(a,u,e){e.d(u,{Z:function(){return T}});var l=e(4819),s=e.n(l),g=e(5457);function T(){return l.useContext(g.Z)}},55838:function(a,u,e){e.d(u,{V:function(){return x}});var l=e(87462),s=e(63366),g=e(4819),T=e.n(g),f=e(15854),r=e.n(f),m=e(67557);const p=["value"],d=g.createContext();function M(E){let{value:O}=E,I=(0,s.Z)(E,p);return(0,m.jsx)(d.Provider,(0,l.Z)({value:O!=null?O:!0},I))}const x=()=>{const E=g.useContext(d);return E!=null?E:!1};u.Z=M},86210:function(a,u,e){e.d(u,{Z:function(){return j}});var l=e(87462),s=e(4819),g=e(15854),T=e(5457),f=e(66005),m=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",p=e(67557);function d(_,c){return typeof c=="function"?c(_):(0,l.Z)({},_,c)}function M(_){const{children:c,theme:h}=_,y=(0,f.Z)(),C=s.useMemo(()=>{const P=y===null?h:d(y,h);return P!=null&&(P[m]=y!==null),P},[h,y]);return(0,p.jsx)(T.Z.Provider,{value:C,children:c})}var x=M,E=e(569),O=e(50384),I=e(55838),S=e(8592);const N={};function U(_,c,h,y=!1){return s.useMemo(()=>{const C=_&&c[_]||c;if(typeof h=="function"){const P=h(C),D=_?(0,l.Z)({},c,{[_]:P}):P;return y?()=>D:D}return _?(0,l.Z)({},c,{[_]:h}):(0,l.Z)({},c,h)},[_,c,h,y])}function W(_){const{children:c,theme:h,themeId:y}=_,C=(0,O.Z)(N),P=(0,f.Z)()||N,D=U(y,C,h),Z=U(y,P,h,!0),J=D.direction==="rtl";return(0,p.jsx)(x,{theme:Z,children:(0,p.jsx)(E.T.Provider,{value:D,children:(0,p.jsx)(I.Z,{value:J,children:(0,p.jsx)(S.Z,{value:D==null?void 0:D.components,children:c})})})})}var j=W},50384:function(a,u,e){var l=e(4819),s=e.n(l),g=e(569);function T(r){return Object.keys(r).length===0}function f(r=null){const m=l.useContext(g.T);return!m||T(m)?r:m}u.Z=f},24470:function(a,u,e){var l,s=e(77440);if(1)u.s=s.createRoot,l=s.hydrateRoot;else var g},19837:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},86443:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},55117:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},86115:function(a){a.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},79399:function(a){a.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},43573:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},28130:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},65909:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},50482:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},17138:function(a){a.exports=JSON.parse(`{"custom_telegram_not_alive":"\u0415\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454","custom_telegram_id":"ID","custom_telegram_name":"\u0406\u043C'\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u0456 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}`)},58246:function(a){a.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.80500ab8.chunk.js.map
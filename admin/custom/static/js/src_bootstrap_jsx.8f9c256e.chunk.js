"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{35700:function(l,I,n){n.r(I);var P=n(4819),s=n.n(P),D=n(24470),p=n(25309),f=n(93109),b=n(33919),j=n(97230),J=n(33924),y=n(55289),M=n(40666),z=n(15854),o=n.n(z),A=n(58503),m=n(94427),L=n(59665),c=n(75606),U=Object.defineProperty,Z=(a,e,t)=>e in a?U(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,$=(a,e,t)=>(Z(a,typeof e!="symbol"?e+"":e,t),t),_=(a,e,t)=>new Promise((r,i)=>{var u=d=>{try{g(t.next(d))}catch(v){i(v)}},h=d=>{try{g(t.throw(d))}catch(v){i(v)}},g=d=>d.done?r(d.value):Promise.resolve(d.value).then(u,h);g((t=t.apply(a,e)).next())});const w=()=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"}});class E extends c.ConfigGeneric{constructor(e){super(e),$(this,"onAliveChanged",(t,r)=>{const i=r?r.val:!1;i!==this.state.alive&&this.setState({alive:i},()=>{i&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(e=>_(this,null,function*(){e&&e.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo(`telegram.${this.props.instance}`,"adminuser",null).then(e=>{const t=[];for(const r in e){const i=[];e[r].userName&&i.push(e[r].userName),e[r].firstName&&i.push(e[r].firstName),t.push({id:r,names:i.join(" / "),sysMessages:e[r].sysMessages})}this.setState({users:t,initialized:!0})})}componentWillUnmount(){return _(this,null,function*(){yield this.props.socket.unsubscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(e){const t=this.state.users.findIndex(r=>r.id===e);if(t!==-1){const r=!this.state.users[t].sysMessages;this.props.socket.sendTo(`telegram.${this.props.instance}`,"systemMessages",{itemId:e,checked:r}).then(i=>{if(i===e){const u=JSON.parse(JSON.stringify(this.state.users)),h=u.findIndex(g=>g.id===e);h!==-1&&(u[h].sysMessages=r,this.setState({users:u}))}})}}onDelete(e){this.props.socket.sendTo(`telegram.${this.props.instance}`,"delUser",e).then(t=>{if(t===e){const r=JSON.parse(JSON.stringify(this.state.users)),i=r.findIndex(u=>u.id===e);i!==-1&&(r.splice(i,1),this.setState({users:r}))}})}renderConfirmDialog(){return this.state.confirm?s().createElement(c.Confirm,{onClose:e=>{const t=this.state.confirm;this.setState({confirm:null},()=>e&&this.onDelete(t))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?s().createElement("div",null,c.i18n.t("custom_telegram_not_alive")):this.state.initialized?s().createElement("div",{style:{width:"100%"}},s().createElement("h4",null,c.i18n.t("custom_telegram_title")),s().createElement(m.TableContainer,{component:m.Paper,style:{width:"100%"}},s().createElement(m.Table,{style:{width:"100%"},size:"small"},s().createElement(m.TableHead,null,s().createElement(m.TableRow,null,s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_id")),s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_name")),s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_sys_messages")),s().createElement(m.TableCell,null))),s().createElement(m.TableBody,null,this.state.users.map(e=>s().createElement(m.TableRow,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},s().createElement(m.TableCell,{component:"th",scope:"row"},e.id),s().createElement(m.TableCell,null,e.names),s().createElement(m.TableCell,null,s().createElement(m.Checkbox,{disabled:!this.state.alive,checked:!!e.sysMessages,onClick:()=>this.onSysMessageChange(e.id)})),s().createElement(m.TableCell,null,s().createElement(m.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:e.id})},s().createElement(L.Delete,null)))))))),this.renderConfirmDialog()):s().createElement(m.LinearProgress,null)}}E.propTypes={socket:o().object.isRequired,themeType:o().string,themeName:o().string,style:o().object,className:o().string,data:o().object.isRequired,attr:o().string,schema:o().object,onError:o().func,onChange:o().func};var B=(0,A.withStyles)(w)(E),F=Object.defineProperty,S=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,T=(a,e,t)=>e in a?F(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,W=(a,e)=>{for(var t in e||(e={}))R.call(e,t)&&T(a,t,e[t]);if(S)for(var t of S(e))G.call(e,t)&&T(a,t,e[t]);return a};const V=a=>({app:{backgroundColor:a.palette.background.default,color:a.palette.text.primary,height:"100%"},item:{padding:50,width:400}});class H extends J.Z{constructor(e){const t=W({},e);super(e,t),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const r={en:n(86443),de:n(19837),ru:n(50482),pt:n(65909),nl:n(43573),fr:n(86115),it:n(79399),es:n(55117),pl:n(28130),uk:n(17138),"zh-cn":n(58246)};y.default.setTranslations(r),y.default.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement("div",{className:this.props.classes.app},s().createElement("div",{className:this.props.classes.item},s().createElement(B,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})}}))))):s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:this.state.theme},s().createElement(M.default,{theme:this.state.themeType})))}}var K=(0,j.Z)(V)(H),Q=n(82890),X=Object.defineProperty,N=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,C=(a,e,t)=>e in a?X(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,q=(a,e)=>{for(var t in e||(e={}))Y.call(e,t)&&C(a,t,e[t]);if(N)for(var t of N(e))k.call(e,t)&&C(a,t,e[t]);return a},ee=a=>{const e="#dd5325",t="#73b6a8",r=q({},(0,Q.default)(a));return r&&(r.palette.text.danger={color:e},r.palette.text.success={color:t},r)};window.adapterName="adapter-component-template";let O=b.default.getThemeName();function x(){const a=document.getElementById("root");return(0,D.s)(a).render(s().createElement(s().StrictMode,null,s().createElement(p.Z,{injectFirst:!0},s().createElement(f.Z,{theme:ee(O)},s().createElement(K,{socket:{port:8081},onThemeChange:t=>{O=t,x()}})))))}x()},19837:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},86443:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},55117:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},86115:function(l){l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},79399:function(l){l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},43573:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},28130:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},65909:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},50482:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},17138:function(l){l.exports=JSON.parse(`{"custom_telegram_not_alive":"\u0415\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454","custom_telegram_id":"ID","custom_telegram_name":"\u0406\u043C'\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u0456 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}`)},58246:function(l){l.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.8f9c256e.chunk.js.map
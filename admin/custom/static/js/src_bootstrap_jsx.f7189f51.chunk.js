"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{41621:(l,c,s)=>{s.r(c);var u=s(28437),a=s.n(u),v=s(94140),f=s(88700),p=s(40805),x=s(96808),P=s.n(x),y=s(2212),S=s(65262),A=s.n(S),E=s(42854),T=s(59434),O=s.n(T),D=s(95973),i=s.n(D),z=s(70143),m=s(67085),B=s(21839),d=s(37449),W=Object.defineProperty,K=(n,e,t)=>e in n?W(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$=(n,e,t)=>(K(n,typeof e!="symbol"?e+"":e,t),t),I=(n,e,t)=>new Promise((r,o)=>{var g=h=>{try{_(t.next(h))}catch(N){o(N)}},C=h=>{try{_(t.throw(h))}catch(N){o(N)}},_=h=>h.done?r(h.value):Promise.resolve(h.value).then(g,C);_((t=t.apply(n,e)).next())});const F=()=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"}});class M extends d.ConfigGeneric{constructor(e){super(e),$(this,"onAliveChanged",(t,r)=>{const o=r?r.val:!1;o!==this.state.alive&&this.setState({alive:o},()=>{o&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(e=>I(this,null,function*(){e&&e.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo(`telegram.${this.props.instance}`,"adminuser",null).then(e=>{const t=[];for(const r in e){const o=[];e[r].userName&&o.push(e[r].userName),e[r].firstName&&o.push(e[r].firstName),t.push({id:r,names:o.join(" / "),sysMessages:e[r].sysMessages})}this.setState({users:t,initialized:!0})})}componentWillUnmount(){return I(this,null,function*(){yield this.props.socket.unsubscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(e){const t=this.state.users.findIndex(r=>r.id===e);if(t!==-1){const r=!this.state.users[t].sysMessages;this.props.socket.sendTo(`telegram.${this.props.instance}`,"systemMessages",{itemId:e,checked:r}).then(o=>{if(o===e){const g=JSON.parse(JSON.stringify(this.state.users)),C=g.findIndex(_=>_.id===e);C!==-1&&(g[C].sysMessages=r,this.setState({users:g}))}})}}onDelete(e){this.props.socket.sendTo(`telegram.${this.props.instance}`,"delUser",e).then(t=>{if(t===e){const r=JSON.parse(JSON.stringify(this.state.users)),o=r.findIndex(g=>g.id===e);o!==-1&&(r.splice(o,1),this.setState({users:r}))}})}renderConfirmDialog(){return this.state.confirm?a().createElement(d.Confirm,{onClose:e=>{const t=this.state.confirm;this.setState({confirm:null},()=>e&&this.onDelete(t))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?a().createElement("div",null,d.i18n.t("custom_telegram_not_alive")):this.state.initialized?a().createElement("div",{style:{width:"100%"}},a().createElement("h4",null,d.i18n.t("custom_telegram_title")),a().createElement(m.TableContainer,{component:m.Paper,style:{width:"100%"}},a().createElement(m.Table,{style:{width:"100%"},size:"small"},a().createElement(m.TableHead,null,a().createElement(m.TableRow,null,a().createElement(m.TableCell,null,d.i18n.t("custom_telegram_id")),a().createElement(m.TableCell,null,d.i18n.t("custom_telegram_name")),a().createElement(m.TableCell,null,d.i18n.t("custom_telegram_sys_messages")),a().createElement(m.TableCell,null))),a().createElement(m.TableBody,null,this.state.users.map(e=>a().createElement(m.TableRow,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},a().createElement(m.TableCell,{component:"th",scope:"row"},e.id),a().createElement(m.TableCell,null,e.names),a().createElement(m.TableCell,null,a().createElement(m.Checkbox,{disabled:!this.state.alive,checked:!!e.sysMessages,onClick:()=>this.onSysMessageChange(e.id)})),a().createElement(m.TableCell,null,a().createElement(m.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:e.id})},a().createElement(B.Delete,null)))))))),this.renderConfirmDialog()):a().createElement(m.LinearProgress,null)}}M.propTypes={socket:i().object.isRequired,themeType:i().string,themeName:i().string,style:i().object,className:i().string,data:i().object.isRequired,attr:i().string,schema:i().object,onError:i().func,onChange:i().func};const G=(0,z.withStyles)(F)(M);var H=Object.defineProperty,j=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,L=(n,e,t)=>e in n?H(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||(e={}))V.call(e,t)&&L(n,t,e[t]);if(j)for(var t of j(e))X.call(e,t)&&L(n,t,e[t]);return n};const Y=n=>({app:{backgroundColor:n.palette.background.default,color:n.palette.text.primary,height:"100%"},item:{padding:50,width:400}});class Z extends A(){constructor(e){const t=Q({},e);super(e,t),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const r={en:s(75553),de:s(46477),ru:s(63715),pt:s(74606),nl:s(86164),fr:s(74554),it:s(66851),es:s(72706),pl:s(23638),uk:s(93882),"zh-cn":s(80222)};E.default.setTranslations(r),E.default.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?a().createElement(f.A,{injectFirst:!0},a().createElement(p.A,{theme:this.state.theme},a().createElement("div",{className:this.props.classes.app},a().createElement("div",{className:this.props.classes.item},a().createElement(G,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})}}))))):a().createElement(f.A,{injectFirst:!0},a().createElement(p.A,{theme:this.state.theme},a().createElement(O(),{theme:this.state.themeType})))}}const w=(0,y.A)(Y)(Z);var k=s(86465),q=Object.defineProperty,U=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,b=(n,e,t)=>e in n?q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,se=(n,e)=>{for(var t in e||(e={}))ee.call(e,t)&&b(n,t,e[t]);if(U)for(var t of U(e))te.call(e,t)&&b(n,t,e[t]);return n};const ae=n=>{const e="#dd5325",t="#73b6a8",r=se({},(0,k.default)(n));return r&&(r.palette.text.danger={color:e},r.palette.text.success={color:t},r)};window.adapterName="adapter-component-template";let R=P().getThemeName();function J(){const n=document.getElementById("root");return(0,v.H)(n).render(a().createElement(a().StrictMode,null,a().createElement(f.A,{injectFirst:!0},a().createElement(p.A,{theme:ae(R)},a().createElement(w,{socket:{port:8081},onThemeChange:t=>{R=t,J()}})))))}J()},40805:(l,c,s)=>{s.d(c,{A:()=>E});var u=s(58168),a=s(98587),v=s(28437),f=s.n(v),p=s(95973),x=s.n(p),P=s(54869),y=s(92066),S=s(64922);const A=["theme"];function E(T){let{theme:O}=T,D=(0,a.A)(T,A);const i=O[y.A];return(0,S.jsx)(P.A,(0,u.A)({},D,{themeId:i?y.A:void 0,theme:i||O}))}},92066:(l,c,s)=>{s.d(c,{A:()=>u});const u="$$material"},94140:(l,c,s)=>{var u,a=s(23479);if(1)c.H=a.createRoot,u=a.hydrateRoot;else var v},46477:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},75553:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},72706:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},74554:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},66851:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},86164:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},23638:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},74606:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},63715:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},93882:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"\u0415\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454","custom_telegram_id":"ID","custom_telegram_name":"\u0406\u043C'\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u0456 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}`)},80222:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.f7189f51.chunk.js.map
"use strict";(self.webpackChunkiobroker_admin_component_telegram=self.webpackChunkiobroker_admin_component_telegram||[]).push([["src_bootstrap_jsx"],{41621:(l,I,a)=>{a.r(I);var P=a(28437),s=a.n(P),A=a(94140),p=a(88700),v=a(40805),D=a(96808),j=a.n(D),b=a(2212),J=a(65262),M=a.n(J),y=a(42854),z=a(59434),L=a.n(z),U=a(95973),i=a.n(U),$=a(70143),m=a(67085),B=a(21839),c=a(37449),F=Object.defineProperty,G=(n,e,t)=>e in n?F(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e,t)=>(G(n,typeof e!="symbol"?e+"":e,t),t),_=(n,e,t)=>new Promise((r,o)=>{var u=d=>{try{g(t.next(d))}catch(f){o(f)}},h=d=>{try{g(t.throw(d))}catch(f){o(f)}},g=d=>d.done?r(d.value):Promise.resolve(d.value).then(u,h);g((t=t.apply(n,e)).next())});const W=()=>({table:{minWidth:400},header:{fontSize:16,fontWeight:"bold"}});class E extends c.ConfigGeneric{constructor(e){super(e),R(this,"onAliveChanged",(t,r)=>{const o=r?r.val:!1;o!==this.state.alive&&this.setState({alive:o},()=>{o&&!this.state.initialized&&this.readData()})}),this.state={alive:!1,initialized:!1,users:[],confirm:null}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.telegram.${this.props.instance}.alive`).then(e=>_(this,null,function*(){e&&e.val?this.setState({alive:!0},()=>this.readData()):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)}))}readData(){this.props.socket.sendTo(`telegram.${this.props.instance}`,"adminuser",null).then(e=>{const t=[];for(const r in e){const o=[];e[r].userName&&o.push(e[r].userName),e[r].firstName&&o.push(e[r].firstName),t.push({id:r,names:o.join(" / "),sysMessages:e[r].sysMessages})}this.setState({users:t,initialized:!0})})}componentWillUnmount(){return _(this,null,function*(){yield this.props.socket.unsubscribeState(`system.adapter.telegram.${this.props.instance}.alive`,this.onAliveChanged)})}onSysMessageChange(e){const t=this.state.users.findIndex(r=>r.id===e);if(t!==-1){const r=!this.state.users[t].sysMessages;this.props.socket.sendTo(`telegram.${this.props.instance}`,"systemMessages",{itemId:e,checked:r}).then(o=>{if(o===e){const u=JSON.parse(JSON.stringify(this.state.users)),h=u.findIndex(g=>g.id===e);h!==-1&&(u[h].sysMessages=r,this.setState({users:u}))}})}}onDelete(e){this.props.socket.sendTo(`telegram.${this.props.instance}`,"delUser",e).then(t=>{if(t===e){const r=JSON.parse(JSON.stringify(this.state.users)),o=r.findIndex(u=>u.id===e);o!==-1&&(r.splice(o,1),this.setState({users:r}))}})}renderConfirmDialog(){return this.state.confirm?s().createElement(c.Confirm,{onClose:e=>{const t=this.state.confirm;this.setState({confirm:null},()=>e&&this.onDelete(t))}}):null}renderItem(){return!this.state.alive&&!this.state.initialized?s().createElement("div",null,c.i18n.t("custom_telegram_not_alive")):this.state.initialized?s().createElement("div",{style:{width:"100%"}},s().createElement("h4",null,c.i18n.t("custom_telegram_title")),s().createElement(m.TableContainer,{component:m.Paper,style:{width:"100%"}},s().createElement(m.Table,{style:{width:"100%"},size:"small"},s().createElement(m.TableHead,null,s().createElement(m.TableRow,null,s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_id")),s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_name")),s().createElement(m.TableCell,null,c.i18n.t("custom_telegram_sys_messages")),s().createElement(m.TableCell,null))),s().createElement(m.TableBody,null,this.state.users.map(e=>s().createElement(m.TableRow,{key:e.id,sx:{"&:last-child td, &:last-child th":{border:0}}},s().createElement(m.TableCell,{component:"th",scope:"row"},e.id),s().createElement(m.TableCell,null,e.names),s().createElement(m.TableCell,null,s().createElement(m.Checkbox,{disabled:!this.state.alive,checked:!!e.sysMessages,onClick:()=>this.onSysMessageChange(e.id)})),s().createElement(m.TableCell,null,s().createElement(m.IconButton,{disabled:!this.state.alive,onClick:()=>this.setState({confirm:e.id})},s().createElement(B.Delete,null)))))))),this.renderConfirmDialog()):s().createElement(m.LinearProgress,null)}}E.propTypes={socket:i().object.isRequired,themeType:i().string,themeName:i().string,style:i().object,className:i().string,data:i().object.isRequired,attr:i().string,schema:i().object,onError:i().func,onChange:i().func};const H=(0,$.withStyles)(W)(E);var V=Object.defineProperty,S=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,T=(n,e,t)=>e in n?V(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||(e={}))w.call(e,t)&&T(n,t,e[t]);if(S)for(var t of S(e))K.call(e,t)&&T(n,t,e[t]);return n};const X=n=>({app:{backgroundColor:n.palette.background.default,color:n.palette.text.primary,height:"100%"},item:{padding:50,width:400}});class Y extends M(){constructor(e){const t=Q({},e);super(e,t),this.state={data:{myCustomAttribute:"red"},theme:this.createTheme()};const r={en:a(75553),de:a(46477),ru:a(63715),pt:a(74606),nl:a(86164),fr:a(74554),it:a(66851),es:a(72706),pl:a(23638),uk:a(93882),"zh-cn":a(80222)};y.default.setTranslations(r),y.default.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}render(){return this.state.loaded?s().createElement(p.A,{injectFirst:!0},s().createElement(v.A,{theme:this.state.theme},s().createElement("div",{className:this.props.classes.app},s().createElement("div",{className:this.props.classes.item},s().createElement(H,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,attr:"myCustomAttribute",data:this.state.data,onError:()=>{},instance:0,schema:{name:"ConfigCustomTelegramSet/Components/TelegramComponent",type:"custom"},onChange:e=>{this.setState({data:e})}}))))):s().createElement(p.A,{injectFirst:!0},s().createElement(v.A,{theme:this.state.theme},s().createElement(L(),{theme:this.state.themeType})))}}const Z=(0,b.A)(X)(Y);var k=a(86465),q=Object.defineProperty,N=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,C=(n,e,t)=>e in n?q(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,se=(n,e)=>{for(var t in e||(e={}))ee.call(e,t)&&C(n,t,e[t]);if(N)for(var t of N(e))te.call(e,t)&&C(n,t,e[t]);return n};const ae=n=>{const e="#dd5325",t="#73b6a8",r=se({},(0,k.default)(n));return r&&(r.palette.text.danger={color:e},r.palette.text.success={color:t},r)};window.adapterName="adapter-component-template";let O=j().getThemeName();function x(){const n=document.getElementById("root");return(0,A.H)(n).render(s().createElement(s().StrictMode,null,s().createElement(p.A,{injectFirst:!0},s().createElement(v.A,{theme:ae(O)},s().createElement(Z,{socket:{port:8081},onThemeChange:t=>{O=t,x()}})))))}x()},46477:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-Instanz ist nicht am Leben","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"Systemmeldungen","custom_telegram_title":"Authentifizierte Benutzer"}')},75553:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram instance is not alive","custom_telegram_id":"ID","custom_telegram_name":"Name","custom_telegram_sys_messages":"System messages","custom_telegram_title":"Authenticated Users"}')},72706:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"La instancia de Telegram no est\xE1 viva","custom_telegram_id":"ID","custom_telegram_name":"Nombre","custom_telegram_sys_messages":"Mensajes del sistema","custom_telegram_title":"Usuarios autenticados"}')},74554:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'instance de t\xE9l\xE9gramme n'est pas active","custom_telegram_id":"ID","custom_telegram_name":"Nom","custom_telegram_sys_messages":"Messages syst\xE8me","custom_telegram_title":"Utilisateurs authentifi\xE9s"}`)},66851:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"L'istanza di Telegram non \xE8 viva","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Messaggi di sistema","custom_telegram_title":"Utenti autenticati"}`)},86164:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Telegram-instantie leeft niet","custom_telegram_id":"ID","custom_telegram_name":"Naam","custom_telegram_sys_messages":"Systeemberichten","custom_telegram_title":"Geverifieerde gebruikers"}')},23638:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"Instancja telegramu nie \u017Cyje","custom_telegram_id":"ID","custom_telegram_name":"Nazwa","custom_telegram_sys_messages":"Komunikaty systemowe","custom_telegram_title":"Uwierzytelnieni u\u017Cytkownicy"}')},74606:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"A inst\xE2ncia do Telegram n\xE3o est\xE1 ativa","custom_telegram_id":"ID","custom_telegram_name":"Nome","custom_telegram_sys_messages":"Mensagens do sistema","custom_telegram_title":"Usu\xE1rios autenticados"}')},63715:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"\u042D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442","custom_telegram_id":"ID","custom_telegram_name":"\u0418\u043C\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u043D\u044B\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438"}')},93882:l=>{l.exports=JSON.parse(`{"custom_telegram_not_alive":"\u0415\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440 Telegram \u043D\u0435 \u043F\u0440\u0430\u0446\u044E\u0454","custom_telegram_id":"ID","custom_telegram_name":"\u0406\u043C'\u044F","custom_telegram_sys_messages":"\u0421\u0438\u0441\u0442\u0435\u043C\u043D\u0456 \u043F\u043E\u0432\u0456\u0434\u043E\u043C\u043B\u0435\u043D\u043D\u044F","custom_telegram_title":"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u043E\u0432\u0430\u043D\u0456 \u043A\u043E\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}`)},80222:l=>{l.exports=JSON.parse('{"custom_telegram_not_alive":"\u7535\u62A5\u5B9E\u4F8B\u4E0D\u5B58\u5728","custom_telegram_id":"ID","custom_telegram_name":"\u59D3\u540D","custom_telegram_sys_messages":"\u7CFB\u7EDF\u6D88\u606F","custom_telegram_title":"\u8BA4\u8BC1\u7528\u6237"}')}}]);

//# sourceMappingURL=src_bootstrap_jsx.23f18bc9.chunk.js.map